## 组管理和权限管理

在 linux 中每个用户必须属于一个组，不能独立于组外。在 linux 中每个文件有所有者、所在组、其他组的概念

1. 所有者
2. 所在组
3. 其他组
4. 改变用户所在的组

### 文件/目录所有者

一般为文件的创建者，谁创建了该文件，就自然的成为了该文件的所有者

- 查看文件的所有者

  指令： ls -ahl

- 修改文件所有者

  指令： chown 用户名 文件名

### 文件/目录所在组

当用户创建一个文件后，默认这个文件的所在组就是该用户所在的组

- 查看文件/目录所在组

  基本指令：ls -ahl

- 修改文件所在的组

  基本指令：chgrp 组名 文件名

### 改变用户所在组

在添加用户时，可以指定将该用户添加到哪个组中，同样的用 root 的管理权限可以改变某个用户所在的组。

- 改变用户所在组

1. usermod -g 组名 用户名
2. usermod -d 目录名 用户名 改变该用户登录的初始目录

### 权限的基本介绍

1. 第 0 位确定文件类型（d,-,l,c,b）
2. 第 1-3 位确定所有者（该文件的所有者）拥有该文件的权限
3. 第 4-6 位确定所在组（同用户组的）拥有该文件的权限
4. 第 7-9 位确定其他用户拥有该文件的权限

`-rw-r--r--. 1 tom police 6 3月 18 19:24 ok.txt`

`-rw-r--r--`

关于第一个字符，此处为-

文件的类型： -:普通文件 d:目录 l:软链接 c:字符设备[键盘，鼠标] b: 块文件

**其他字符，每三个一组(rwx)读(r)写(w)执行(x)**

关于第二段，此处为 rw-

表示文件的所有者权限.

关于第三段，此处为 r--

表示文件所在组的用户的权限

关于第四段，此处为 r--

表示文件其他组的用户的权限

`1`

如果是个文件，1 表示硬连接
如果是个目录，则表示该目录下有 1 个子目录，n 则表示有 n 个,注意此处包含两个隐藏目录，.(当前目录)，..(上级目录)

`tom`

表示文件所有者为 tom

`police`

表示文件所在组

`6`

表示文件的大小，为 6 个字节（包含一个隐藏尾字节）,如果是目录，统一显示为 4096

`3月 18 19:24`

表示文件最后的修改时间

#### rwx 权限详解

可用数字表示为：r=4,w=2,x=1，因此 rwx=4+2+1=7

rwx 作用到文件

[r]代表可读（read）: 可以读取，查看
[w]代表可写（write）: 可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件
[x]代表可执行（execute）: 可以被执行

rwx 作用到目录

[r]代表可读（read）: 可以读取，ls 查看目录内容
[w]代表可写（write）: 可以修改，目录内创建+删除+重命名目录
[x]代表可执行（excute）: 可以进入该目录

### 修改权限-chmod

通过 chmod 指令，可以修改文件或者目录的权限

**第一种方式：+ 、 - 、 =变更权限**

u:所有者 g:所有组 o:其他人 a:所有人(u,g,o 的总和)

- chmod u=rwx,g=rx,o=x 文件目录名

  给该文件的所有者，所有组，其他人分别什么权限

- chmod o+w 文件目录名

  给其他人 加 什么权限

- chmod a-x 文件目录名

  给所有人 减 什么权限

#### 通过数字变更权限

r=4 w=2 x=1 rwx=4+2+1=7

chmod u=rwx,g=rx,o=x 文件目录名
相当于 chmod 751 文件目录名

### 修改文件所有者

chown [] newowner file 改变文件的所有者
chown [] newowner:newgroup file 改变文件的所有者和所有组
-R 如果是目录，则使其下所有子文件或目录递归生效

### 修改文件所在组

chgrp [] newgroup file 改变文件的所有组
-R 如果是目录，则使其下所有子文件或目录递归生效
